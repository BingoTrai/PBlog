function initializeLoad($scope,$timeout){$scope.start(),$scope.fakeIntro=!0,$timeout(function(){$scope.complete(),$scope.fakeIntro=!1,initializeHighLight()},750)}function initializeHighLight(){$("pre code").each(function(i,block){hljs.highlightBlock(block)})}var pBlogApp={},app=angular.module("pBlogApp",["chieffancypants.loadingBar","ngAnimate","ngRoute","ngSanitize","pBlogApp.filters","pBlogApp.services","pBlogApp.directives"]).config(function($routeProvider,$locationProvider){$routeProvider.when("/index",{templateUrl:"/index/layout",controller:IndexController}),$routeProvider.when("/archives",{templateUrl:"/archives/layout",controller:ArchivesController}),$routeProvider.when("/category",{templateUrl:"/category/layout",controller:CategoryController}),$routeProvider.when("/read",{templateUrl:"/read/layout",controller:ReadController}),$routeProvider.when("/about",{templateUrl:"/about/layout",controller:AboutController}),$routeProvider.when("/archives/:timeStamp",{templateUrl:"/archives/layout",controller:ArchivesTimeStampController}),$routeProvider.when("/category/:categorySlug",{templateUrl:"/category/layout",controller:CategorySlugController}),$routeProvider.when("/article/:articleSlug",{templateUrl:"/article/slug/layout",controller:ArticleController}),$routeProvider.otherwise({redirectTo:"/index"})}).config(function(cfpLoadingBarProvider){cfpLoadingBarProvider.includeSpinner=!0}).controller("loadingBar",function($scope,$http,$timeout,cfpLoadingBar){$scope.start=function(){cfpLoadingBar.start()},$scope.complete=function(){cfpLoadingBar.complete()}});
var AppDirectives=angular.module("pBlogApp.directives",[]);AppDirectives.directive("appVersion",["version",function(version){return function(scope,elm,attrs){elm.text(version)}}]);
var AppFilters=angular.module("pBlogApp.filters",[]);AppFilters.filter("interpolate",["version",function(version){return function(text){return String(text).replace(/\%VERSION\%/gm,version)}}]);

var AppServices=angular.module("pBlogApp.services",[]);AppServices.value("version","0.1");
function initializeAbout(){$(".menu_bar ul li").each(function(index){5==index?$(this).addClass("active"):$(this).removeClass("active")})}var AboutController=function($scope,$interval,$http,$timeout){$scope.fetchAboutMessage=function(){initializeAbout(),initializeLoad($scope,$timeout)},$scope.fetchAboutMessage()};
function initializeArchives(){$(".menu_bar ul li").each(function(index){1==index?$(this).addClass("active"):$(this).removeClass("active")})}var ArchivesController=function($scope,$interval,$http,$timeout){$scope.fetchArchivesList=function(){$http.get("/archivesList.json").success(function(data){initializeArchives(),$scope.archivesList=data.archivesVOList,$scope.articleList=data.archivesVOList[0].articleInfoVOList,initializeLoad($scope,$timeout)}).error(function(err){console.log(err)})},$scope.fetchArchivesList()};
function initializeArchivesTimeStamp(){$(".menu_bar ul li").each(function(index){1==index?$(this).addClass("active"):$(this).removeClass("active")})}var ArchivesTimeStampController=function($scope,$interval,$http,$timeout,$routeParams){var timeStamp=$routeParams.timeStamp;$scope.fetchArchivesTimeStampList=function(){$http.get("/archives/"+timeStamp+".json").success(function(data){initializeArchivesTimeStamp(),initializeLoad($scope,$timeout),$scope.archivesList=data.archivesVOList,$scope.articleList=data.articleInfoVOList,$scope.timeStamp=timeStamp}).error(function(err){console.log(err)})},$scope.fetchArchivesTimeStampList()};
function initializeArticleSlug(){$(".menu_bar ul li").each(function(){$(this).removeClass("active")})}function initializeArticleContent(content_md){var $contentBody=$(".content-body"),contentHTML=marked(content_md),$tempHTML=$("<div></div>").append(contentHTML),counter=0;$tempHTML.find("h2").each(function(){$(this).attr("id","section-"+counter++)}),$contentBody.html($tempHTML);var $navList=$(".nav-list"),topArray=[],navHTML="<ul>";$(".content-body h2").each(function(index){var distance=document.getElementById("section-"+index).offsetTop;topArray[index]=distance,navHTML+=0==index?"<li onclick='scrollArticle("+distance+")' id='nav-section-"+index+"'  class='active'>"+$(this).text()+"</li>":"<li onclick='scrollArticle("+distance+")' id='nav-section-"+index+"'>"+$(this).text()+"</li>"}),navHTML+="</ul>",$navList.html(navHTML),$(window).scroll(function(){var scrollDistance=$("body").scrollTop()+30;scrollDistance>165?$(".content-nav").addClass("fixed"):165>=scrollDistance&&$(".content-nav").removeClass("fixed");for(var i=0;i<topArray.length;i++)if(0==i){if(scrollDistance<=topArray[i+1]){removeActiveClass(topArray),$("#nav-section-0").addClass("active");break}}else if(scrollDistance>=topArray[i]&&scrollDistance<=topArray[i+1]){removeActiveClass(topArray),$("#nav-section-"+i).addClass("active");break}})}function scrollArticle(distance){$("body").animate({scrollTop:distance},300)}function removeActiveClass(topArray){for(var i=0;i<topArray.length;i++)$("#nav-section-"+i).removeClass("active")}var ArticleController=function($scope,$interval,$http,$timeout,$routeParams){var articleSlug=$routeParams.articleSlug;$scope.fetchArticle=function(){$http.get("/article/"+articleSlug+".json").success(function(data){$scope.articleVO=data.articleVO,initializeArticleSlug(),initializeLoad($scope,$timeout),initializeArticleContent(data.articleVO.content)})},$scope.fetchArticle()};
function initializeCategory(){$(".menu_bar ul li").each(function(index){2==index?$(this).addClass("active"):$(this).removeClass("active")})}var CategoryController=function($scope,$interval,$http,$timeout){$scope.fetchCategoryList=function(){$http.get("/categoryList.json").success(function(data){initializeCategory(),$scope.categoryList=data.categoryInfoVOList,$scope.articleList=data.articleInfoVOList,initializeLoad($scope,$timeout)}).error(function(err){console.log(err)})},$scope.fetchCategoryList()};
function initializeCategorySlug(){$(".menu_bar ul li").each(function(index){2==index?$(this).addClass("active"):$(this).removeClass("active")})}var CategorySlugController=function($scope,$interval,$http,$timeout,$routeParams){var categorySlug=$routeParams.categorySlug;$scope.fetchCategorySlugList=function(){$http.get("/category/"+categorySlug+".json").success(function(data){initializeCategorySlug(),$scope.categoryList=data.categoryInfoVOList,$scope.articleList=data.articleInfoVOList,initializeLoad($scope,$timeout)}).error(function(err){console.log(err)})},$scope.fetchCategorySlugList()};
function initializeIndex(content_md){var $contentBody=$(".content-body");$(".menu_bar ul li").each(function(index){0==index?$(this).addClass("active"):$(this).removeClass("active")}),$contentBody.html(marked(content_md)),loadSlider()}function loadSlider(){var $container=$(".scroll-area"),$content=$(".article-list"),$slideArea=$(".scroll-vertical"),$bar=$(".scroll-bar");$container.slider({container:$container,content:$content,slideArea:$slideArea,bar:$bar})}var IndexController=function($scope,$interval,$http,$timeout){$scope.fetchArticlesList=function(){$http.get("/topTenArticle.json").success(function(data){$scope.detail=data.detail,$scope.articleList=data.pagination.items,$scope.f_article=data.firstArticle,initializeIndex($scope.f_article.content),initializeLoad($scope,$timeout)}).error(function(err){console.log(err)})},$scope.fetchArticlesList()};
function initializeRead(){$(".menu_bar ul li").each(function(index){3==index?$(this).addClass("active"):$(this).removeClass("active")})}var ReadController=function($scope,$interval,$http,$timeout){$scope.fetchBooksList=function(){$http.get("/book/list.json").success(function(data){initializeRead(),initializeLoad($scope,$timeout),$scope.bookInfoList=data.bookInfoVOList,$scope.bookTableList=data.bookTableVOList}).error(function(err){console.log(err)})},$scope.fetchBooksList()};